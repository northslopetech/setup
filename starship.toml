"$schema" = 'https://starship.rs/config-schema.json'

# Increase global command timeout to 1000ms (1 second)
command_timeout = 1000

# Custom format to include ns.config.json values
format = """
[┌──](bold green) $username $directory$git_branch$git_status$nodejs$python${custom.impl_project_prefix}${custom.impl_name}${custom.project_name}
$character
"""

[python]
format = '[${symbol}${pyenv_prefix}(${version} ) ]($style)'

[custom.impl_project_prefix]
when = '[ -f ns.config.json ]'
format = "\n[├── ]($style)"
style = 'bold green'

# Custom module to display implName
[custom.impl_name]
command = "awk -F'\"' '/\"implName\"/ {for(i=1;i<=NF;i++){if($i==\"implName\"){print $(i+2); exit}}}' ns.config.json 2>/dev/null"
when = '[ -f ns.config.json ]'
format = '[$output ]($style)'
style = 'bold cyan'

# Custom module to display projectName
[custom.project_name]
command = "awk -F'\"' '/\"projectName\"/ {for(i=1;i<=NF;i++){if($i==\"projectName\"){print $(i+2); exit}}}' ns.config.json 2>/dev/null"
when = '[ -f ns.config.json ]'
format = "[$output ]($style)"
style = 'bold yellow'

[username]
show_always = true
format = '[$user]($style)'
style_user = 'bold white'

[directory]
truncation_length = 3
truncate_to_repo = true
format = '[$path]($style)[$read_only]($read_only_style) '
style = 'bold blue'

[git_branch]
format = "[\n├── ](bold green)[$symbol$branch(:$remote_branch)]($style) "
symbol = ''
truncation_symbol = '...'
ignore_branches = []
style = 'bold purple'

[git_status]
format = '($untracked$staged$conflicted$stashed$deleted$renamed$modified$ahead_behind )'
conflicted = '[⚔️${count}](bold red)'
ahead = '[⇡${count}](bold cyan)'
behind = '[⇣${count}](bold yellow)'
diverged = '[⇕${count}](bold purple)'
untracked = '[?](bold red)'
stashed = ''
modified = '[!](bold yellow)'
staged = '[+](bold green)'
renamed = '[»](bold cyan)'
deleted = '[✘](bold red)'

[character]
success_symbol = '[└─>](bold green)'
error_symbol = '[└─✘](bold red)'

[battery]
full_symbol = "full "
charging_symbol = "charging "
discharging_symbol = "discharging "
unknown_symbol = "unknown "
empty_symbol = "empty "

[erlang]
symbol = "erlang "

[fortran]
symbol = "fortran "

[nodejs]
format = '[$symbol ($version )]($style)'
symbol = "JS"

[pulumi]
symbol = "pulumi "

[typst]
symbol = "typst "
